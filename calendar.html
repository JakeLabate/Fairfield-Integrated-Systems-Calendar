<!DOCTYPE html>
<html lang="en">
<head>

	<meta charset="UTF-8">
	<title>Title</title>

	<link rel="stylesheet" href="calendar_style.css">

</head>
<body>

<section id="today">
	<div>
		<h2>Today</h2>
		<text class="currentDayOfWeek"></text>
		<text class="currentMonth"></text>
		<text class="currentDayOfMonth"></text>
		<text class="currentYear"></text>
		<br><br>
		<div class="singleDayCalendar">
      <div class="events-container-today">
      </div>
			<div class="hour">
				<div>00:00 AM</div>
				<div class="fifteenMinuteBlock">:15</div>
				<div class="fifteenMinuteBlock">:30</div>
				<div class="fifteenMinuteBlock">:45</div>
			</div>
			<div class="hour">
				<div>1:00 AM</div>
				<div class="fifteenMinuteBlock">:15</div>
				<div class="fifteenMinuteBlock">:30</div>
				<div class="fifteenMinuteBlock">:45</div>
			</div>
			<div class="hour">
				<div>2:00 AM</div>
				<div class="fifteenMinuteBlock">:15</div>
				<div class="fifteenMinuteBlock">:30</div>
				<div class="fifteenMinuteBlock">:45</div>
			</div>
			<div class="hour">
				<div>3:00 AM</div>
				<div class="fifteenMinuteBlock">:15</div>
				<div class="fifteenMinuteBlock">:30</div>
				<div class="fifteenMinuteBlock">:45</div>
			</div>
			<div class="hour">
				<div>4:00 AM</div>
				<div class="fifteenMinuteBlock">:15</div>
				<div class="fifteenMinuteBlock">:30</div>
				<div class="fifteenMinuteBlock">:45</div>
			</div>
			<div class="hour">
				<div>5:00 AM</div>
				<div class="fifteenMinuteBlock">:15</div>
				<div class="fifteenMinuteBlock">:30</div>
				<div class="fifteenMinuteBlock">:45</div>
			</div>
			<div class="hour">
				<div>6:00 AM</div>
				<div class="fifteenMinuteBlock">:15</div>
				<div class="fifteenMinuteBlock">:30</div>
				<div class="fifteenMinuteBlock">:45</div>
			</div>
			<div class="hour">
				<div>7:00 AM</div>
				<div class="fifteenMinuteBlock">:15</div>
				<div class="fifteenMinuteBlock">:30</div>
				<div class="fifteenMinuteBlock">:45</div>
			</div>
			<div class="hour">
				<div>8:00 AM</div>
				<div class="fifteenMinuteBlock">:15</div>
				<div class="fifteenMinuteBlock">:30</div>
				<div class="fifteenMinuteBlock">:45</div>
			</div>
			<div class="hour">
				<div>9:00 AM</div>
				<div class="fifteenMinuteBlock">:15</div>
				<div class="fifteenMinuteBlock">:30</div>
				<div class="fifteenMinuteBlock">:45</div>
			</div>
			<div class="hour">
				<div>10:00 AM</div>
				<div class="fifteenMinuteBlock">:15</div>
				<div class="fifteenMinuteBlock">:30</div>
				<div class="fifteenMinuteBlock">:45</div>
			</div>
			<div class="hour">
				<div>11:00 AM</div>
				<div class="fifteenMinuteBlock">:15</div>
				<div class="fifteenMinuteBlock">:30</div>
				<div class="fifteenMinuteBlock">:45</div>
			</div>
			<div class="hour">
				<div>12:00 PM</div>
				<div class="fifteenMinuteBlock">:15</div>
				<div class="fifteenMinuteBlock">:30</div>
				<div class="fifteenMinuteBlock">:45</div>
			</div>
			<div class="hour">
				<div>1:00 PM</div>
				<div class="fifteenMinuteBlock">:15</div>
				<div class="fifteenMinuteBlock">:30</div>
				<div class="fifteenMinuteBlock">:45</div>
			</div>
			<div class="hour">
				<div>2:00 PM</div>
				<div class="fifteenMinuteBlock">:15</div>
				<div class="fifteenMinuteBlock">:30</div>
				<div class="fifteenMinuteBlock">:45</div>
			</div>
			<div class="hour">
				<div>3:00 PM</div>
				<div class="fifteenMinuteBlock">:15</div>
				<div class="fifteenMinuteBlock">:30</div>
				<div class="fifteenMinuteBlock">:45</div>
			</div>
			<div class="hour">
				<div>4:00 PM</div>
				<div class="fifteenMinuteBlock">:15</div>
				<div class="fifteenMinuteBlock">:30</div>
				<div class="fifteenMinuteBlock">:45</div>
			</div>
			<div class="hour">
				<div>5:00 PM</div>
				<div class="fifteenMinuteBlock">:15</div>
				<div class="fifteenMinuteBlock">:30</div>
				<div class="fifteenMinuteBlock">:45</div>
			</div>
			<div class="hour">
				<div>6:00 PM</div>
				<div class="fifteenMinuteBlock">:15</div>
				<div class="fifteenMinuteBlock">:30</div>
				<div class="fifteenMinuteBlock">:45</div>
			</div>
			<div class="hour">
				<div>7:00 PM</div>
				<div class="fifteenMinuteBlock">:15</div>
				<div class="fifteenMinuteBlock">:30</div>
				<div class="fifteenMinuteBlock">:45</div>
			</div>
			<div class="hour">
				<div>8:00 PM</div>
				<div class="fifteenMinuteBlock">:15</div>
				<div class="fifteenMinuteBlock">:30</div>
				<div class="fifteenMinuteBlock">:45</div>
			</div>
			<div class="hour">
				<div>9:00 PM</div>
				<div class="fifteenMinuteBlock">:15</div>
				<div class="fifteenMinuteBlock">:30</div>
				<div class="fifteenMinuteBlock">:45</div>
			</div>
			<div class="hour">
				<div>10:00 PM</div>
				<div class="fifteenMinuteBlock">:15</div>
				<div class="fifteenMinuteBlock">:30</div>
				<div class="fifteenMinuteBlock">:45</div>
			</div>
			<div class="hour">
				<div>11:00 PM</div>
				<div class="fifteenMinuteBlock">:15</div>
				<div class="fifteenMinuteBlock">:30</div>
				<div class="fifteenMinuteBlock">:45</div>
			</div>
		</div>
	</div>
	<div>

	</div>
</section>

<section id="3weeksView">
	<div>Tomorrow</div>
	<div id="week1" style="display: flex; flex-direction: row;">
		<div class="dayCard">
			<div class="events-container-week">
				<div class="event-week" style="top: 50px; left: 10px;" onclick="document.querySelector('.modal').style.display='flex'">
					<span>Jake Labate</span><span>Blue Van</span><span> 22 Dairy - Pre-Wire and Savant Lighting</span>
				</div>
				<div class="event-week" style="top: 450px; left: 15px;" onclick="document.querySelector('.modal').style.display='flex'">
					<span>Jake Labate</span><span>Blue Van</span><span> 22 Dairy - Pre-Wire and Savant Lighting</span>
				</div>
				<div class="event-week" style="top: 290px; left: 0px;" onclick="document.querySelector('.modal').style.display='flex'">
					<span>Jake Labate</span><span>Blue Van</span><span> 22 Dairy - Pre-Wire and Savant Lighting</span>
				</div>
				<div class="event-week" style="top: 40px; left: 45px;" onclick="document.querySelector('.modal').style.display='flex'">
					<span>Jake Labate</span><span>Blue Van</span><span> 22 Dairy - Pre-Wire and Savant Lighting</span>
				</div>
				<div class="event-week" style="top: 90px; left: 150px;" onclick="document.querySelector('.modal').style.display='flex'">
					<span>Jake Labate</span><span>Blue Van</span><span> 22 Dairy - Pre-Wire and Savant Lighting</span>
				</div>
			</div>
			<text class="currentDayOfWeekPlus3"></text>
			<div class="smallHour">00:00 AM</div>
			<div class="smallHour">01:00 AM</div>
			<div class="smallHour">02:00 AM</div>
			<div class="smallHour">03:00 AM</div>
			<div class="smallHour">04:00 AM</div>
			<div class="smallHour">05:00 AM</div>
			<div class="smallHour">06:00 AM</div>
			<div class="smallHour">07:00 AM</div>
			<div class="smallHour">08:00 AM</div>
			<div class="smallHour">09:00 AM</div>
			<div class="smallHour">10:00 AM</div>
			<div class="smallHour">11:00 AM</div>
			<div class="smallHour">12:00 PM</div>
			<div class="smallHour">01:00 PM</div>
			<div class="smallHour">02:00 PM</div>
			<div class="smallHour">03:00 PM</div>
			<div class="smallHour">04:00 PM</div>
			<div class="smallHour">05:00 PM</div>
			<div class="smallHour">06:00 PM</div>
			<div class="smallHour">07:00 PM</div>
			<div class="smallHour">08:00 PM</div>
			<div class="smallHour">09:00 PM</div>
			<div class="smallHour">10:00 PM</div>
			<div class="smallHour">11:00 PM</div>
		</div>
		<div class="dayCard">
			<text class="currentDayOfWeekPlus4"></text>
		</div>
		<div class="dayCard">
			<text class="currentDayOfWeekPlus5"></text>
		</div>
		<div class="dayCard">
			<text class="currentDayOfWeekPlus6"></text>
		</div>
		<div class="dayCard">
			<text class="currentDayOfWeek"></text>
		</div>
	</div>

	<div>Week of 15th</div>
	<div id="week2" style="display: flex; flex-direction: row;">
		<div class="dayCard">
			Monday
		</div>
		<div class="dayCard">
			Tuesday
		</div>
		<div class="dayCard">
			Wednesday
		</div>
		<div class="dayCard">
			Thursday
		</div>
		<div class="dayCard">
			Friday
		</div>
	</div>

	<div>Week of 15th</div>
	<div id="week3" style="display: flex; flex-direction: row;">
		<div class="dayCard">
			Monday
		</div>
		<div class="dayCard">
			Tuesday
		</div>
		<div class="dayCard">
			Wednesday
		</div>
		<div class="dayCard">
			Thursday
		</div>
		<div class="dayCard">
			Friday
		</div>
	</div>

</section>
<div class="modal" style="display: none;" onclick="document.querySelector('.modal').style.display='none'">		
	<div class="modal-content" onclick="insideModal(event)">
		<div class="modal-close" onclick="document.querySelector('.modal').style.display='none'">X</div>
		<div class="modal-content-row"><span>Todo: </span> 22 Dairy - Pre-Wire and Savant Lighting</div>
		<div class="modal-content-row"><span>Team Member: </span> Jake Labate</div>
		<div class="modal-content-row"><span>Vehicle: </span> Blue Van</div>
	</div>
</div>


<script src="calendar_script.js"></script>
<script type="module">
	console.log("Firebase Real Time Database Script Loaded");
	// Full list of functions: https://firebase.google.com/docs/web/setup#available-libraries
	import { initializeApp } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-app.js";
	import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-firestore.js";

	// Firebase configuration
	const firebaseConfig = {
		apiKey: "AIzaSyA076_DdfgtN-UFPRysbn-3ca7khvOSx6E",
		authDomain: "fairfield-integrated-systems.firebaseapp.com",
		databaseURL: "https://fairfield-integrated-systems-default-rtdb.firebaseio.com",
		projectId: "fairfield-integrated-systems",
		storageBucket: "fairfield-integrated-systems.appspot.com",
		messagingSenderId: "358421826101",
		appId: "1:358421826101:web:b8b89c26da56a64731ff7c"
	};
	
	// Initialize Firebase
	const app = initializeApp(firebaseConfig);
	const firestore = getFirestore(app);
	
	async function getEvents(){
		const querySnapshot = await getDocs(collection(firestore, "events"));
		let index = 0;
		querySnapshot.forEach(doc => {
			// doc.data() is never undefined for query doc snapshots
			const data = doc.data();
			const startMinute = getMinutes(data.time.start.split("T")[1])
			const endMinute = getMinutes(data.time.end.split("T")[1])
			
			let teamMembersName = data.teamMembers?.map(e => e.name)?.join(", ");
			addCardToday({
				id: doc.id, startMinute, endMinute,
				teamMember: teamMembersName,
				vehicle: data.vehicle?.name,
				todo: data.toDo?.name,
				numberOfEvents: querySnapshot.size,
				eventIndex: index++
			})
		});
	}
	
	getEvents()
	</script>


<script>
	function insideModal(event){
		console.log(event)
		event.stopPropagation()
	}
</script>
</body>
</html>